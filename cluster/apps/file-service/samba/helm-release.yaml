---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: samba
  namespace: file-service
spec:
  interval: 5m
  chart:
    spec:
      # renovate: registryUrl=https://k8s-at-home.com/charts/
      chart: samba
      version: 5.2.0
      sourceRef:
        kind: HelmRepository
        name: k8s-at-home-charts
        namespace: flux-system
  values:
    service:
      main:
        type: LoadBalancer
        externalTrafficPolicy: Local
    env:
      SHARE1: camera;/share/camera;yes;no;yes
      SHARE2: music;/share/music;yes;no;yes
      SHARE3: recording;/share/recording;yes;no;yes
      SHARE4: screenshot;/share/screenshot;yes;no;yes
      SHARE5: outside-temp;/share/temps;yes;no;yes
      SHARE6: dump-cephfs;/share/dump_ceph_fs;yes;no;yes
      SHARE7: old-disk;/share/old_disk;yes;no;yes
    persistence:
      camera-files:
        enabled: true
        type: pvc
        existingClaim: camera-files
        mountPath: /share/camera
      music-files:
        enabled: true
        type: pvc
        existingClaim: music-files
        mountPath: /share/music
      recording-files:
        enabled: true
        type: pvc
        existingClaim: recording-files
        mountPath: /share/recording
      screenshot-files:
        enabled: true
        type: pvc
        existingClaim: screenshot-files
        mountPath: /share/screenshot

      outside-temp-files:
        enabled: true
        type: hostPath
        hostPath: /mnt/temps
        mountPath: /share/temps
      dump-cephfs-files:
        enabled: true
        type: hostPath
        hostPath: /mnt/dump_ceph_fs
        mountPath: /share/dump_ceph_fs
      old-disk-files:
        enabled: true
        type: hostPath
        hostPath: /mnt/old_disk
        mountPath: /share/old_disk
